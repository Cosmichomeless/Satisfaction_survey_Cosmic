<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario de Satisfacción</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
            background-color: #fff7e6;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: auto;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .progress-container {
            width: 100%;
            background-color: #ddd;
            border-radius: 4px;
            margin-bottom: 20px;
            height: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #ff9966;
            border-radius: 4px;
            transition: width 0.3s ease-in-out;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            border-radius: 8px;
            overflow: hidden;
        }

        th,
        td {
            padding: 12px;
            border: 1px solid #ddd;
        }

        th {
            background-color: #ffcc99;
        }

        td {
            background-color: #ffe5b4;
        }

        .btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #ff9966;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }

        .btn:hover {
            background-color: #ff704d;
        }

        #view2,
        #chartContainer {
            display: none;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <div id="view1">
            <h2>Cuestionario de Satisfacción</h2>
            <p>Por favor, califica los siguientes aspectos de la clase de empresa:</p>
            <form id="formView1">
                <table>
                    <tr>
                        <th>Aspecto</th>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>5</th>
                    </tr>
                    <tr>
                        <td>Claridad de la explicación</td>
                        <td><input type="radio" name="p1" value="1"></td>
                        <td><input type="radio" name="p1" value="2"></td>
                        <td><input type="radio" name="p1" value="3"></td>
                        <td><input type="radio" name="p1" value="4"></td>
                        <td><input type="radio" name="p1" value="5"></td>
                    </tr>
                    <tr>
                        <td>Organización de la clase</td>
                        <td><input type="radio" name="p2" value="1"></td>
                        <td><input type="radio" name="p2" value="2"></td>
                        <td><input type="radio" name="p2" value="3"></td>
                        <td><input type="radio" name="p2" value="4"></td>
                        <td><input type="radio" name="p2" value="5"></td>
                    </tr>
                    <tr>
                        <td>Utilidad del material</td>
                        <td><input type="radio" name="p3" value="1"></td>
                        <td><input type="radio" name="p3" value="2"></td>
                        <td><input type="radio" name="p3" value="3"></td>
                        <td><input type="radio" name="p3" value="4"></td>
                        <td><input type="radio" name="p3" value="5"></td>
                    </tr>
                    <tr>
                        <td>Interacción con el docente</td>
                        <td><input type="radio" name="p4" value="1"></td>
                        <td><input type="radio" name="p4" value="2"></td>
                        <td><input type="radio" name="p4" value="3"></td>
                        <td><input type="radio" name="p4" value="4"></td>
                        <td><input type="radio" name="p4" value="5"></td>
                    </tr>
                    <tr>
                        <td>Aplicabilidad de los contenidos</td>
                        <td><input type="radio" name="p5" value="1"></td>
                        <td><input type="radio" name="p5" value="2"></td>
                        <td><input type="radio" name="p5" value="3"></td>
                        <td><input type="radio" name="p5" value="4"></td>
                        <td><input type="radio" name="p5" value="5"></td>
                    </tr>
                    <tr>
                        <td>Satisfacción general</td>
                        <td><input type="radio" name="p6" value="1"></td>
                        <td><input type="radio" name="p6" value="2"></td>
                        <td><input type="radio" name="p6" value="3"></td>
                        <td><input type="radio" name="p6" value="4"></td>
                        <td><input type="radio" name="p6" value="5"></td>
                    </tr>
                </table>
                <button type="button" class="btn" onclick="nextView1()">Siguiente</button>
            </form>
        </div>

        <div id="view2">
            <h2>Cuestionario de Satisfacción</h2>
            <p>Continúa calificando los siguientes aspectos:</p>
            <form id="formView2">
                <table>
                    <tr>
                        <th>Aspecto</th>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>5</th>
                    </tr>
                    <tr>
                        <td>Innovación en el contenido</td>
                        <td><input type="radio" name="p7" value="1"></td>
                        <td><input type="radio" name="p7" value="2"></td>
                        <td><input type="radio" name="p7" value="3"></td>
                        <td><input type="radio" name="p7" value="4"></td>
                        <td><input type="radio" name="p7" value="5"></td>
                    </tr>
                    <tr>
                        <td>Calidad de las actividades</td>
                        <td><input type="radio" name="p8" value="1"></td>
                        <td><input type="radio" name="p8" value="2"></td>
                        <td><input type="radio" name="p8" value="3"></td>
                        <td><input type="radio" name="p8" value="4"></td>
                        <td><input type="radio" name="p8" value="5"></td>
                    </tr>
                    <tr>
                        <td>Uso de ejemplos prácticos</td>
                        <td><input type="radio" name="p9" value="1"></td>
                        <td><input type="radio" name="p9" value="2"></td>
                        <td><input type="radio" name="p9" value="3"></td>
                        <td><input type="radio" name="p9" value="4"></td>
                        <td><input type="radio" name="p9" value="5"></td>
                    </tr>
                    <tr>
                        <td>Accesibilidad del docente</td>
                        <td><input type="radio" name="p10" value="1"></td>
                        <td><input type="radio" name="p10" value="2"></td>
                        <td><input type="radio" name="p10" value="3"></td>
                        <td><input type="radio" name="p10" value="4"></td>
                        <td><input type="radio" name="p10" value="5"></td>
                    </tr>
                    <tr>
                        <td>Recursos tecnológicos</td>
                        <td><input type="radio" name="p11" value="1"></td>
                        <td><input type="radio" name="p11" value="2"></td>
                        <td><input type="radio" name="p11" value="3"></td>
                        <td><input type="radio" name="p11" value="4"></td>
                        <td><input type="radio" name="p11" value="5"></td>
                    </tr>
                    <tr>
                        <td>Atención a dudas</td>
                        <td><input type="radio" name="p12" value="1"></td>
                        <td><input type="radio" name="p12" value="2"></td>
                        <td><input type="radio" name="p12" value="3"></td>
                        <td><input type="radio" name="p12" value="4"></td>
                        <td><input type="radio" name="p12" value="5"></td>
                    </tr>
                </table>
                <button type="button" class="btn" onclick="submitSurvey()">Enviar</button>
            </form>
        </div>

        <div id="chartContainer">
            <h3>Resumen General de la Encuesta</h3>
            <canvas id="resultChart"></canvas>
        </div>
    </div>

    <script>
        function updateProgressView1() {
            const groups = ['p1', 'p2', 'p3', 'p4', 'p5', 'p6'];
            let filled = 0;
            groups.forEach(group => {
                const radios = document.getElementsByName(group);
                if ([...radios].some(radio => radio.checked)) filled++;
            });
            const percentage = (filled / groups.length) * 50;
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        function updateProgressView2() {
            const groups = ['p7', 'p8', 'p9', 'p10', 'p11', 'p12'];
            let filled = 0;
            groups.forEach(group => {
                const radios = document.getElementsByName(group);
                if ([...radios].some(radio => radio.checked)) filled++;
            });
            const percentage = 50 + ((filled / groups.length) * 50);
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        // Agregar event listener a los radios de la vista 1
        document.querySelectorAll('#formView1 input[type="radio"]').forEach(input => {
            input.addEventListener('change', updateProgressView1);
        });
        // Agregar event listener a los radios de la vista 2
        document.querySelectorAll('#formView2 input[type="radio"]').forEach(input => {
            input.addEventListener('change', updateProgressView2);
        });

        function nextView1() {
            const groups = ['p1', 'p2', 'p3', 'p4', 'p5', 'p6'];
            let valid = true;
            groups.forEach(group => {
                const radios = document.getElementsByName(group);
                if (![...radios].some(radio => radio.checked)) valid = false;
            });
            if (!valid) {
                alert("Por favor, completa todas las filas de la Vista 1.");
            } else {
                groups.forEach(group => {
                    const radios = document.getElementsByName(group);
                    const checked = [...radios].find(radio => radio.checked);
                    localStorage.setItem(group, checked.value);
                });
                document.getElementById('view1').style.display = 'none';
                document.getElementById('view2').style.display = 'block';
                document.getElementById('progressBar').style.width = '50%';
            }
        }

        function submitSurvey() {
            const groups = ['p7', 'p8', 'p9', 'p10', 'p11', 'p12'];
            let valid = true;
            groups.forEach(group => {
                const radios = document.getElementsByName(group);
                if (![...radios].some(radio => radio.checked)) valid = false;
            });
            if (!valid) {
                alert("Por favor, completa todas las filas de la Vista 2.");
            } else {
                groups.forEach(group => {
                    const radios = document.getElementsByName(group);
                    const checked = [...radios].find(radio => radio.checked);
                    localStorage.setItem(group, checked.value);
                });
                document.getElementById('progressBar').style.width = '100%';
                document.getElementById('view2').style.display = 'none';
                document.getElementById('chartContainer').style.display = 'block';
                showChart();
            }
        }

        function showChart() {
            const preguntas = [
                'Claridad de la explicación',
                'Organización de la clase',
                'Utilidad del material',
                'Interacción con el docente',
                'Aplicabilidad de los contenidos',
                'Satisfacción general',
                'Innovación en el contenido',
                'Calidad de las actividades',
                'Uso de ejemplos prácticos',
                'Accesibilidad del docente',
                'Recursos tecnológicos',
                'Atención a dudas'
            ];

            const respuestas = [];
            for (let i = 1; i <= 12; i++) {
                const valor = localStorage.getItem('p' + i);
                respuestas.push(valor ? parseInt(valor) : 0);
            }

            const ctx = document.getElementById('resultChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: preguntas,
                    datasets: [{
                        label: 'Puntuación',
                        data: respuestas,
                        backgroundColor: 'rgba(255, 153, 102, 0.7)',
                        borderColor: 'rgba(255, 153, 102, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5,
                            ticks: { stepSize: 1 }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Resumen de la Encuesta' }
                    }
                }
            });
        }
    </script>
</body>

</html>